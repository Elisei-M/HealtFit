<!DOCTYPE html>
<html lang="ro">
<head>
  <meta charset="UTF-8" />
  <title>HealthFit - Home</title>

  <!-- Import Remix Icons pentru iconițe (hamburger, close etc.) -->
  <link
    rel="stylesheet"
    href="https://cdn.jsdelivr.net/npm/remixicon@3.5.0/fonts/remixicon.css"
  />

  <!-- Stilurile noastre -->
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <!-- Container în care vom încărca navbar-ul dinamic -->
  <div id="navbar-container"></div>

  <main>
    <!-- HERO / LANDING PAGE -->
    <section id="home">
      <div class="hero">
        <div class="visual">
          <picture>
            <!-- surse avif/webp pentru imagini mari/mici -->
            <source
              srcset="https://raw.githubusercontent.com/mobalti/open-props-interfaces/main/landing-page-with-scroll-driven/assets/images/hero.webp"
              type="image/avif"
              media="(width > 1024px)"
            />
            <source
              srcset="https://raw.githubusercontent.com/mobalti/open-props-interfaces/main/landing-page-with-scroll-driven/assets/images/hero-mobile.avif"
              type="image/avif"
            />
            <source
              srcset="https://raw.githubusercontent.com/mobalti/open-props-interfaces/main/landing-page-with-scroll-driven/assets/images/hero.webp"
              media="(width > 1024px)"
              type="image/webp"
            />
            <img
              src="https://raw.githubusercontent.com/mobalti/open-props-interfaces/main/landing-page-with-scroll-driven/assets/images/hero-mobile.webp"
              alt="fitness"
            />
          </picture>
        </div>

        <div class="content">
          <h1>Good Morning Champ</h1>
          <div class="wrapper">
            <a href="#discover" class="LinkButton Primary"> DISCOVER MORE </a>
          </div>
        </div>
      </div>

      <div id="discover" class="fold">
        <div class="subject">
          <p>
            It's a new day,
            <span style="color: var(--brand-1)">
              a new opportunity to sculpt the best version of yourself.
              Embrace the energy,
            </span>
            feel the burn, and conquer your fitness goals with unwavering
            determination.
          </p>
        </div>
      </div>
    </section>

    <!-- SCHEDULES / EXEMPLE DE ANTRENAMENTE -->
    <section id="schedules" class="schedule">
      <div class="subject">
        <div class="container">
          <div class="table-wrapper">
            <h2>Program de antrenamente</h2>
            <table>
              <tr>
                <th>Antrenament</th>
                <th>Grupe musculare</th>
              </tr>
              <tr>
                <td>Antrenament 1</td>
                <td>Piept & Triceps</td>
              </tr>
              <tr>
                <td>Antrenament 2</td>
                <td>Spate & Biceps</td>
              </tr>
              <tr>
                <td>Antrenament 3</td>
                <td>Picioare & Umeri</td>
              </tr>
              <tr>
                <td>Antrenament 4</td>
                <td>Cardio / Full Body</td>
              </tr>
            </table>
          </div>
          <div class="table-wrapper">
            <h2>Exemple exercitii</h2>
            <table>
              <tr>
                <th>Grupa</th>
                <th>Exercitiu</th>
              </tr>
              <tr>
                <td>Piept</td>
                <td>Bench press</td>
              </tr>
              <tr>
                <td>Triceps</td>
                <td>Parallel bar dips</td>
              </tr>
              <tr>
                <td>Spate</td>
                <td>Lat pulldown</td>
              </tr>
              <tr>
                <td>Picioare</td>
                <td>Squat</td>
              </tr>
            </table>
          </div>
        </div>
      </div>
      <div class="showcase">
        <video
          autoplay
          loop
          muted
          poster="https://raw.githubusercontent.com/mobalti/open-props-interfaces/main/landing-page-with-scroll-driven/assets/images/poster.webp"
          role="none"
        >
          <source
            src="https://raw.githubusercontent.com/mobalti/open-props-interfaces/main/landing-page-with-scroll-driven/assets/demo.mp4"
            type="video/mp4"
          />
        </video>
        <img
          src="https://raw.githubusercontent.com/mobalti/open-props-interfaces/main/landing-page-with-scroll-driven/assets/images/rhythm.png"
          alt="Rhythm"
        />
      </div>
    </section>

    <!-- CARDS / PLANURI / CHALLENGES -->
    <section id="plans" class="cards">
      <div class="subject">
        <div class="container">
          <a href="#" class="Card">
            <i class="ri-trophy-line"></i>
            <div>
              <h2>Personal Bests</h2>
              <ul>
                <li>Fastest 5K Run: 22 min</li>
                <li>Heaviest Deadlift: 250 lbs</li>
                <li>Longest Plank: 3 min</li>
              </ul>
            </div>
          </a>
          <a href="#" class="Card">
            <i class="ri-flag-2-line"></i>
            <div>
              <h2>Challenges</h2>
              <ul>
                <li>30-Day Running Streak</li>
                <li>1000 Pushups in a Month</li>
                <li>Swim 20km in a Month</li>
              </ul>
            </div>
          </a>
          <a href="#" class="Card">
            <i class="ri-team-line"></i>
            <div>
              <h2>Friends Activity</h2>
              <ul>
                <li>Jane just set a new record in cycling: 30 miles!</li>
                <li>Mike completed the 30-Day Running Streak Challenge!</li>
                <li>Anna shared a new workout: 'Hill Sprints Interval'.</li>
              </ul>
            </div>
          </a>
        </div>
      </div>
    </section>

    <!-- ABOUT -->
    <section id="about" class="about">
      <div id="target-word">love</div>
      <footer></footer>
    </section>
  </main>

  <!-- Script de logică meniu, animații, etc. -->
  <script>
    // 1) Încărcăm dinamically conținutul din "navbar.html"
    fetch('navbar.html')
      .then(resp => resp.text())
      .then(html => {
        document.getElementById('navbar-container').innerHTML = html;

        // După ce a sosit navbar-ul, definim logica de meniu:
        const openMenuBtn = document.querySelector('#openMenuBtn');
        const closeMenuBtn = document.querySelector('#closeMenuBtn');
        const menu = document.querySelector('#menu');

        function openMenu() {
          menu.classList.add('open');
          closeMenuBtn.focus();
          window.addEventListener('keyup', handleCloseWithESC);
        }

        function closeMenu() {
          menu.classList.remove('open');
          openMenuBtn.focus();
          window.removeEventListener('keyup', handleCloseWithESC);
        }

        function handleCloseWithESC(e) {
          if (e.key === 'Escape') {
            closeMenu();
          }
        }

        function handleViewTransition(updateDom) {
          if (!document.startViewTransition) updateDom();
          else document.startViewTransition(() => updateDom());
        }

        openMenuBtn.addEventListener('click', () => handleViewTransition(openMenu));
        closeMenuBtn.addEventListener('click', () => handleViewTransition(closeMenu));

        document.querySelectorAll('.NavLink').forEach(link => {
          link.addEventListener('click', () => handleViewTransition(closeMenu));
        });

        // 2) Firebase Auth -> arătăm/ascundem link "Login" și "Logout"
        import('https://www.gstatic.com/firebasejs/11.4.0/firebase-app.js').then(async () => {
          const { getAuth, onAuthStateChanged, signOut } = await import('https://www.gstatic.com/firebasejs/11.4.0/firebase-auth.js');

          // Config identic cu restul site-ului
          const firebaseConfig = {
            apiKey: "AIzaSyDkACBZ_7DJOSuko8hIHoBCGrz3EllW-GY",
            authDomain: "healthfit-9de3f.firebaseapp.com",
            projectId: "healthfit-9de3f",
          };
          const app = firebase.initializeApp(firebaseConfig); // deja definit? Poți folosi initializeApp
          const auth = getAuth(app);

          const loginLink = document.getElementById('loginLink');
          const logoutLink = document.getElementById('logoutLink');

          onAuthStateChanged(auth, (user) => {
            if (user) {
              loginLink.style.display = 'none';
              logoutLink.style.display = 'block';
            } else {
              loginLink.style.display = 'block';
              logoutLink.style.display = 'none';
            }
          });

          logoutLink.addEventListener('click', async (ev) => {
            ev.preventDefault();
            await signOut(auth);
          });
        });
      })
      .catch(err => {
        console.error("Eroare la încărcarea navbar.html:", err);
      });


    // 3) Animații la scroll
    let scrollDirection;
    document.addEventListener('scroll', (e) => {
      const st = window.pageYOffset || document.documentElement.scrollTop;
      const direction = st > e.target.lastScrollTop ? 'down' : 'up';
      if (Math.abs(st - e.target.lastScrollTop) > 5) {
        document.body.setAttribute('scroll-direction', direction);
      }
      scrollDirection = direction;
      e.target.lastScrollTop = st <= 0 ? 0 : st;
    }, { passive: true });

    // 4) Mic text replacer (ex. la #target-word) - opțional
    const words = ['passion', 'success', 'goals', 'rhythm', 'fun', 'energy', 'opportunity'];
    textReplace(words, 'target-word', 1200);

    function textReplace(words, targetElementId, rate) {
      let idx = 0;
      const el = document.getElementById(targetElementId);
      if (!el) return;
      setInterval(() => {
        el.style.opacity = 0;
        setTimeout(() => {
          idx = (idx + 1) % words.length;
          el.textContent = words[idx];
          el.style.opacity = 1;
        }, 200);
      }, rate);
    }
  </script>
</body>
</html>
